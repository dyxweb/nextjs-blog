## Session-Cookie
1. 客户端向服务器发送登录信息用户名/密码来请求登录。
2. 服务器验证登录的信息，验证通过后自动创建Session（将Session保存在内存或Redis中），然后给这个Session生成一个唯一的标识字符串会话身份凭证 session_id(通常称为sid)，并在响应头Set-Cookie中设置这个唯一标识符。
3. 客户端收到服务器的响应后会解析响应头，并自动将sid保存在本地Cookie中，浏览器在下次HTTP请求时请求头会自动附带上该域名下的Cookie信息。
4. 服务器接收客户端请求时会去解析请求头Cookie中的sid，然后根据这个sid去找服务端保存的该客户端的sid，然后判断该请求是否合法。
### Session-Cookie的优点
- Cookie简单易用。
- Session数据存储在服务端，相较于JWT方便进行管理，当用户登录和主动注销只需要添加删除对应的Session即可，方便管理。
- 只需要后端操作即可，前端可以无感等进行操作。
### Session-Cookie的缺点
- 依赖Cookie，一旦用户在浏览器端禁用Cookie就不生效。
- Cookie将数据暴露在浏览器中不安全，增加了数据被盗的风险（容易被CSRF等攻击）。
- Session存储在服务端，增大了服务端的开销，用户量大的时候会降低服务器性能。
### Session存储方式
- Redis(推荐)：内存型数据库以key-value的形式存储，且访问快。
- 内存：直接放到变量里，一旦服务重启就没了。
- 数据库：普通数据库，性能不高。
### Session的分布式问题
> 通常服务端是集群，而用户请求过来会走一次负载均衡，不一定打到哪台机器上。那一旦用户后续接口请求到的机器和他登录请求的机器不一致，或者登录请求的机器宕机，Session验证就会有问题。

- 从存储角度：把Session集中存储。用独立的Redis或普通数据库把Session都存到一个库里。
- 从分布角度：让相同IP的请求在负载均衡时都打到同一台机器上。以nginx为例，可以配置ip_hash来实现。